/**
 * Browser-Specific CSS Fixes
 * 
 * Handles cross-browser compatibility issues
 * Task 21: Cross-Browser Compatibility Testing
 */

/* ============================================
   Firefox-Specific Fixes
   ============================================ */

.browser-firefox {
  /* Custom scrollbar styling for Firefox */
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
}

.browser-firefox input[type="date"],
.browser-firefox input[type="time"],
.browser-firefox input[type="datetime-local"] {
  /* Ensure consistent date input styling */
  appearance: none;
  -moz-appearance: textfield;
}

/* ============================================
   Safari-Specific Fixes
   ============================================ */

.browser-safari {
  /* Fix for Safari backdrop-filter */
  -webkit-backdrop-filter: blur(10px);
}

.browser-safari input[type="date"],
.browser-safari input[type="time"],
.browser-safari input[type="datetime-local"] {
  /* Ensure consistent date input styling */
  -webkit-appearance: none;
  appearance: none;
}

.browser-safari input[type="search"] {
  /* Remove Safari search input styling */
  -webkit-appearance: none;
  appearance: none;
}

.browser-safari input[type="search"]::-webkit-search-decoration,
.browser-safari input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none;
  appearance: none;
}

/* Fix for Safari button styling */
.browser-safari button,
.browser-safari input[type="button"],
.browser-safari input[type="submit"] {
  -webkit-appearance: none;
  appearance: none;
}

/* Fix for Safari select styling */
.browser-safari select {
  -webkit-appearance: none;
  appearance: none;
}

/* Prevent elastic scrolling on iOS Safari */
.browser-safari.is-mobile {
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

/* ============================================
   Chrome-Specific Fixes
   ============================================ */

.browser-chrome {
  /* Chrome-specific fixes if needed */
}

/* Remove autofill background color in Chrome */
.browser-chrome input:-webkit-autofill,
.browser-chrome input:-webkit-autofill:hover,
.browser-chrome input:-webkit-autofill:focus {
  -webkit-box-shadow: 0 0 0 1000px white inset;
  -webkit-text-fill-color: inherit;
  transition: background-color 5000s ease-in-out 0s;
}

/* ============================================
   Edge-Specific Fixes
   ============================================ */

.browser-edge {
  /* Edge-specific fixes if needed */
}

/* Remove Edge clear button from inputs */
.browser-edge input::-ms-clear,
.browser-edge input::-ms-reveal {
  display: none;
}

/* ============================================
   Mobile-Specific Fixes
   ============================================ */

.is-mobile {
  /* Prevent text size adjustment on orientation change */
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Prevent zoom on input focus (iOS) */
.is-mobile input,
.is-mobile select,
.is-mobile textarea {
  font-size: 16px !important;
}

/* Improve touch targets on mobile */
.is-mobile button,
.is-mobile a,
.is-mobile [role="button"] {
  min-height: 44px;
  min-width: 44px;
}

/* ============================================
   Cross-Browser Scrollbar Styling
   ============================================ */

/* Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.5);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
}

/* ============================================
   Cross-Browser Input Styling
   ============================================ */

/* Remove default input styling across browsers */
input,
select,
textarea,
button {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: 0;
}

/* Ensure consistent focus styles */
input:focus,
select:focus,
textarea:focus,
button:focus {
  outline: 2px solid #667eea;
  outline-offset: 2px;
}

/* ============================================
   Cross-Browser Print Styles
   ============================================ */

@media print {
  /* Ensure consistent print styles across browsers */
  body {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Prevent page breaks inside elements */
  .no-break {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Hide elements that shouldn't print */
  .no-print {
    display: none !important;
  }
}

/* ============================================
   Cross-Browser Backdrop Filter
   ============================================ */

.backdrop-blur {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* Fallback for browsers that don't support backdrop-filter */
@supports not (backdrop-filter: blur(10px)) {
  .backdrop-blur {
    background-color: rgba(255, 255, 255, 0.9);
  }
}

/* ============================================
   Cross-Browser Grid Layout Fixes
   ============================================ */

/* Ensure consistent grid behavior */
.grid {
  display: grid;
  display: -ms-grid; /* IE11 fallback */
}

/* ============================================
   Cross-Browser Flexbox Fixes
   ============================================ */

/* Ensure consistent flexbox behavior */
.flex {
  display: flex;
  display: -webkit-flex;
  display: -ms-flexbox;
}

/* ============================================
   Cross-Browser Animation Fixes
   ============================================ */

/* Ensure smooth animations across browsers */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Prevent animation jank */
.will-change {
  will-change: transform, opacity;
}

/* ============================================
   Cross-Browser RTL Support
   ============================================ */

/* Ensure consistent RTL behavior */
[dir="rtl"] {
  direction: rtl;
  text-align: right;
}

[dir="rtl"] input,
[dir="rtl"] textarea {
  text-align: right;
}

/* ============================================
   Cross-Browser Safe Area Support
   ============================================ */

/* Support for notched devices (iPhone X+) */
@supports (padding: max(0px)) {
  .safe-area-inset-top {
    padding-top: max(env(safe-area-inset-top), 0px);
  }

  .safe-area-inset-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0px);
  }

  .safe-area-inset-left {
    padding-left: max(env(safe-area-inset-left), 0px);
  }

  .safe-area-inset-right {
    padding-right: max(env(safe-area-inset-right), 0px);
  }
}

/* ============================================
   Cross-Browser Form Validation
   ============================================ */

/* Remove default validation bubbles */
input:invalid,
select:invalid,
textarea:invalid {
  box-shadow: none;
}

/* Custom validation styles */
input.error,
select.error,
textarea.error {
  border-color: #ef4444;
}

input.success,
select.success,
textarea.success {
  border-color: #10b981;
}

/* ============================================
   Cross-Browser Accessibility
   ============================================ */

/* Ensure focus is visible in all browsers */
:focus-visible {
  outline: 2px solid #667eea;
  outline-offset: 2px;
}

/* Remove focus outline for mouse users */
:focus:not(:focus-visible) {
  outline: none;
}

/* Ensure screen reader only content is hidden properly */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
